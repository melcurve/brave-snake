{"version":3,"sources":["App.tsx","utils/common.ts","routes/yard/yard.tsx","routes/routers-routing.tsx","index.tsx"],"names":["App","to","React","Component","randomNumber","min","max","Math","floor","random","Yard","props","yardRef","yardSize","state","blockMap","Array","pow","fill","map","_item","index","isEdgeIndex","id","type","snakeInfo","name","position","direction","speed","score","gameInterval","this","className","ref","e","tabIndex","onKeyDown","onkeydown","item","includes","length","focus","setFood","setGameInterval","isEdge","i","clearGameInterval","setInterval","goSnakeGo","clearInterval","leftHead","handleMove","push","addScore","rightHeight","upHead","downHead","setState","gameover","splice","foodBlock","find","getPosition","number","key","RoutersRouting","exact","path","component","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.01d567a3.chunk.js","sourcesContent":["import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport \"./styles/style.scss\";\n\nexport default class App extends React.Component {\n  render() {\n    return (\n      <div>\n        <Link to=\"/yard\">Start</Link>\n      </div>\n    );\n  }\n}\n","export const PATTERN_EMPTY = /\\S/; // 是否为空\r\nexport const PATTERN_ISPHONE = /^1[3456789]\\d{9}$/; // 是否为手机号\r\nexport const PATTERN_ISVIDEO = /\\.(swf|avi|flv|mpg|rm|mov|wav|asf|3gp|mkv|rmvb|mp4)/; // 是否为视频\r\nexport const PATTERN_HASCN = /[\\u4e00-\\u9fa5]/; // 是否包含中文\r\nexport const PATTERN_NUMBER = /^[0-9]*$/; // 纯数字\r\nexport const PATTERN_DIGIT = /^(([0-9])|([1-9]([0-9]+)))(.[0-9]+)?$/; // 数字和小数点\r\n\r\n/**\r\n * 判断是否有值（包含0）\r\n * @param value 值\r\n * @param type 判断类型 0 默认判断 1 是否为数组且数组是否为空 2 是否为对象且对象是否为空\r\n */\r\nexport function valid(value: any, type?: 0 | 1 | 2 | 3): boolean {\r\n  // 普通判断\r\n  if (!value && value !== 0) return false;\r\n  else if (!type) return true;\r\n  // 数组判断\r\n  if (type === 1) return Boolean((value instanceof Array) && value.length);\r\n  // 对象判断\r\n  if (type === 2) return Boolean((value instanceof Object) && Object.keys(value).length > 0);\r\n};\r\n\r\n/**\r\n * 深拷贝\r\n * @param {object} target 需要深拷贝的对象\r\n * @return 返回对象,如果传入的值不是对象则返回原来的值\r\n */\r\nexport function deepClone(target: any) {\r\n  let result = null;\r\n  if (typeof target === 'object') {\r\n    if (Array.isArray(target)) {\r\n      result = [];\r\n      for (let i in target) {\r\n        result.push(deepClone(target[i]));\r\n      }\r\n    } else if (target === null) {\r\n      result = null;\r\n    } else if (target.constructor === RegExp || target.constructor === Date) {\r\n      result = target;\r\n    } else {\r\n      result = {};\r\n      for (let i in target) {\r\n        result[i] = deepClone(target[i]);\r\n      }\r\n    }\r\n  } else {\r\n    result = target;\r\n  }\r\n  return result;\r\n};\r\n\r\n/**\r\n * 延时\r\n * @param callback 回调\r\n * @param timeout 延时，不传则为0\r\n */\r\nexport function delay(callback: any, timeout?: number) {\r\n  let t = setTimeout(() => {\r\n    if (t) clearTimeout(t);\r\n    callback();\r\n  }, timeout || 0);\r\n};\r\n\r\n/**\r\n * 数组分割\r\n * @param array 需要分割的数组\r\n * @param groupLength 组大小\r\n */\r\nexport function arrayGroup(array: Array<any>, groupLength) {\r\n  var index = 0;\r\n  var newArray = [];\r\n  while (index < array.length) {\r\n    newArray.push(array.slice(index, index += groupLength));\r\n  }\r\n  return newArray;\r\n};\r\n\r\n/**\r\n * 对象转数组\r\n */\r\nexport function objectToArray(object: any): Array<any> {\r\n  return Object.values(object);\r\n}\r\n\r\n/**\r\n * 获取数字区间的随机数\r\n * @param min 最小值\r\n * @param max 最大值\r\n */\r\nexport function randomNumber(min: number, max: number) {\r\n  return Math.floor(Math.random() * (max - min + 1)) + min;\r\n};\r\n\r\n/**\r\n * 数字补0\r\n * @param {number} number 数字\r\n * @param {*} length 返回的长度\r\n * @return 返回\r\n */\r\nexport function fixNumber(number: any, length?: number) {\r\n  if (!isNaN(number)) {\r\n    if (!length) length = 2;\r\n    let len = number.toString().length;\r\n    while (len < length) {\r\n      number = '0' + number;\r\n      len++;\r\n    }\r\n    return number;\r\n  } else {\r\n    return '';\r\n  }\r\n}\r\n\r\n/**\r\n * 数组排序\r\n * @param list 数组\r\n * @param type 1 从大到小 2 从小到大\r\n */\r\nexport function sortArray(list: Array<number>, type: 1 | 2) {\r\n  let arr = deepClone(list);\r\n  arr.map((item) => {\r\n    item = Number(item);\r\n  });\r\n  arr.sort((value1: number, value2: number) => {\r\n    if (type == 1) {\r\n      return value2 - value1;\r\n    } else {\r\n      return value1 - value2;\r\n    }\r\n  });\r\n  return arr;\r\n}\r\n\r\n/**\r\n * 获取数组中的随机元素\r\n */\r\nexport function randomArrayItem(array: Array<any>) {\r\n  return array[randomNumber(0, array.length - 1)];\r\n};\r\n\r\n/**\r\n * 判断size值(px)\r\n */\r\nexport function getSize(value: string | number): string {\r\n  if (!valid(value)) return '0px';\r\n  else if (isNaN(Number(value))) {\r\n    if (String(value).indexOf('vw') >= 0) return `${document.body.clientWidth * Number(String(value).replace('vw', '')) * 0.01}px`;\r\n    else if (String(value).indexOf('vh') >= 0) return `${document.body.clientHeight * Number(String(value).replace('vh', '')) * 0.01}px`;\r\n    else return String(value);\r\n  } else return `${value}px`;\r\n};\r\n\r\nexport function inputBoolean(value: any): boolean {\r\n  return Boolean(value || value === '');\r\n};\r\n\r\nexport function changeClass(element: any, value: any, className: string) {\r\n  if (inputBoolean(value)) element.classList.add(className);\r\n  else element.classList.remove(className);\r\n}\r\n\r\nexport function isInclude(value: any, include: Array<any>): boolean {\r\n  for (let i = 0; i < include.length; i++) {\r\n    if (value === include[i]) {\r\n      return true;\r\n    }\r\n  }\r\n  return false;\r\n}","import React from \"react\";\r\nimport { BlockItem, YardState } from \".\";\r\nimport { randomNumber } from \"../../utils/common\";\r\nimport \"./yard.scss\";\r\n\r\nexport default class Yard extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n  }\r\n\r\n  yardRef: any;\r\n\r\n  yardSize: number = 50;\r\n\r\n  state: YardState = {\r\n    blockMap: Array(Math.pow(this.yardSize, 2))\r\n      .fill(\"\")\r\n      .map((_item, index) => {\r\n        if (this.isEdgeIndex(index)) return { id: index, type: \"edge\" };\r\n        return { id: index, type: \"default\" };\r\n      }),\r\n    snakeInfo: {\r\n      name: \"Hoovy\",\r\n      position: [this.yardSize, this.yardSize + 1, this.yardSize + 2],\r\n      direction: \"right\",\r\n    },\r\n    speed: 100,\r\n    score: 0,\r\n  };\r\n\r\n  gameInterval: any;\r\n\r\n  get blockMap() {\r\n    return this.state.blockMap;\r\n  }\r\n\r\n  get snakeInfo() {\r\n    return this.state.snakeInfo;\r\n  }\r\n\r\n  render() {\r\n    const renderBlockItem = () => {\r\n      return this.blockMap.map((item: BlockItem, index) => {\r\n        return <div key={item.id} className={`block-item ${this.snakeInfo.position.includes(index) ? \"filled\" : \"\"} ${index == this.snakeInfo.position[this.snakeInfo.position.length - 1] ? \"head\" : \"\"} type-${item.type}`}></div>;\r\n      });\r\n    };\r\n\r\n    return (\r\n      <div className=\"yard\" ref={(e) => (this.yardRef = e)} tabIndex={0} onKeyDown={(e) => this.onkeydown(e)}>\r\n        <div className=\"block-container flex-row\">{renderBlockItem()}</div>\r\n        <div className=\"info-block flex-row\">\r\n          <div className=\"score\">积分：{this.state.score}</div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.yardRef.focus();\r\n    this.setFood();\r\n    this.setGameInterval();\r\n  }\r\n\r\n  isEdgeIndex(index: number): boolean {\r\n    let isEdge = false;\r\n    if (index + 1 <= this.yardSize || index + 1 >= this.yardSize * (this.yardSize - 1)) isEdge = true;\r\n    for (let i = 1; i <= this.yardSize; i++) {\r\n      if (index == i * this.yardSize - this.yardSize || index == i * this.yardSize - 1) isEdge = true;\r\n    }\r\n    return isEdge;\r\n  }\r\n\r\n  setGameInterval() {\r\n    this.clearGameInterval();\r\n    this.gameInterval = setInterval(() => {\r\n      this.goSnakeGo();\r\n    }, this.state.speed);\r\n  }\r\n\r\n  clearGameInterval() {\r\n    if (!this.gameInterval) return;\r\n    clearInterval(this.gameInterval);\r\n    this.gameInterval = null;\r\n  }\r\n\r\n  goSnakeGo() {\r\n    let snakeInfo = this.snakeInfo;\r\n    let position = snakeInfo.position;\r\n    switch (this.snakeInfo.direction) {\r\n      case \"left\":\r\n        const leftHead = position[position.length - 1] - 1;\r\n        this.handleMove(leftHead);\r\n        if (this.blockMap[leftHead].type == \"food\") {\r\n          position.push(leftHead - 1);\r\n          this.addScore();\r\n          this.setFood();\r\n        }\r\n        break;\r\n      case \"right\":\r\n        const rightHeight = position[position.length - 1] + 1;\r\n        this.handleMove(rightHeight);\r\n        if (this.blockMap[rightHeight].type == \"food\") {\r\n          position.push(rightHeight + 1);\r\n          this.addScore();\r\n          this.setFood();\r\n        }\r\n        break;\r\n      case \"up\":\r\n        const upHead = position[position.length - 1] - this.yardSize;\r\n        this.handleMove(upHead);\r\n        if (this.blockMap[upHead].type == \"food\") {\r\n          position.push(upHead - this.yardSize);\r\n          this.addScore();\r\n          this.setFood();\r\n        }\r\n        break;\r\n      case \"down\":\r\n        const downHead = position[position.length - 1] + this.yardSize;\r\n        this.handleMove(downHead);\r\n        if (this.blockMap[downHead].type == \"food\") {\r\n          position.push(downHead + this.yardSize);\r\n          this.addScore();\r\n          this.setFood();\r\n        }\r\n        break;\r\n    }\r\n    this.setState({\r\n      snakeInfo,\r\n    });\r\n  }\r\n\r\n  handleMove(position: number) {\r\n    if (this.blockMap[position].type == \"edge\" || this.snakeInfo.position.includes(position)) {\r\n      this.gameover();\r\n      return;\r\n    }\r\n    this.snakeInfo.position.splice(0, 1);\r\n    this.snakeInfo.position.push(position);\r\n  }\r\n\r\n  addScore() {\r\n    this.state.score++;\r\n  }\r\n\r\n  setFood() {\r\n    const getPosition = (): number => {\r\n      const number = randomNumber(0, Math.pow(this.yardSize, 2));\r\n      if (this.snakeInfo.position.includes(number) || this.blockMap[number].type == \"edge\") return getPosition();\r\n      else return number;\r\n    };\r\n\r\n    let blockMap = this.blockMap;\r\n    let foodBlock = blockMap.find((item) => item.type == \"food\");\r\n    if (foodBlock) foodBlock.type = \"default\";\r\n    const position = getPosition();\r\n    blockMap[position].type = \"food\";\r\n    this.setState({ blockMap });\r\n  }\r\n\r\n  onkeydown(e: any) {\r\n    switch (e.key) {\r\n      case \"ArrowUp\":\r\n        if (this.snakeInfo.direction != \"down\") this.snakeInfo.direction = \"up\";\r\n        break;\r\n      case \"ArrowLeft\":\r\n        if (this.snakeInfo.direction != \"right\") this.snakeInfo.direction = \"left\";\r\n        break;\r\n      case \"ArrowRight\":\r\n        if (this.snakeInfo.direction != \"left\") this.snakeInfo.direction = \"right\";\r\n        break;\r\n      case \"ArrowDown\":\r\n        if (this.snakeInfo.direction != \"up\") this.snakeInfo.direction = \"down\";\r\n        break;\r\n    }\r\n  }\r\n\r\n  gameover() {\r\n    this.clearGameInterval();\r\n  }\r\n}\r\n","import { HashRouter, Switch, Route } from \"react-router-dom\";\r\nimport App from \"../App\";\r\nimport Yard from \"./yard/yard\";\r\n\r\nexport default function RoutersRouting() {\r\n  return (\r\n    <HashRouter>\r\n      <Switch>\r\n        <Route exact path=\"/\" component={App} />\r\n        <Route exact path=\"/yard\" component={Yard} />\r\n      </Switch>\r\n    </HashRouter>\r\n  );\r\n}\r\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport RoutersRouting from \"./routes/routers-routing\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <RoutersRouting />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}